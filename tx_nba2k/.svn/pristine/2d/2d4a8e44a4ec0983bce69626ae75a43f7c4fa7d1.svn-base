<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tx.dao.UserDao">
	<resultMap type="user" id="userMap">
		<id column="id" property="id"/>
		<result column="uname" property="uname"/>
		<result column="pwd" property="pwd"/>
		<result column="pname" property="pname"/>
		<association property="power" javaType="power" column="pid" select="com.tx.dao.PowerDao.queryPower" ></association>
	</resultMap>
	<select id="queryUser" parameterType="user" resultMap="userMap">
		select * from tx_user where uname=#{uname} and pwd = #{pwd}
	</select>
	
	<insert id="regUser" parameterType="user">
		insert into tx_user(uname,pwd,pname,pid) values(#{uname},#{pwd},#{pname},1)
	</insert>
	
	<select id="queryUserByUname" parameterType="string" resultMap="userMap">
		select * from tx_user where uname=#{uname}
	</select>
	
	<select id="queryUserById" parameterType="int" resultMap="userMap">
		select * from tx_user where id=#{userid}
	</select>
	
	<select id="queryUserByPname" parameterType="string" resultMap="userMap">
		select * from tx_user where pname=#{pname}
	</select>
</mapper>