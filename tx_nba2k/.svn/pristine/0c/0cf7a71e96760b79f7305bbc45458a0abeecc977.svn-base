<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tx.dao.TeamDao">
	<resultMap type="team" id="teamMap">
		<id column="id" property="id"/>
		<result column="tcname" property="tcname"/>
		<result column="tename" property="tename"/>
		<result column="pic" property="pic"/>
		<result column="pickid" property="pickid"/>
		<association property="grade" column="gid" javaType="grade" select="com.tx.dao.GradeDao.queryGradeById"></association>
	</resultMap>
	<select id="queryTeamById" parameterType="int" resultMap="teamMap">
		select * from tx_team where id = #{tid}
	</select>

	<select id="queryTeam" parameterType="team" resultMap="teamMap">
		select * from tx_team where pickid = #{pickid} and gid=#{grade.id}
	</select>
	
	<select id="queryTeamByGid" parameterType="int" resultMap="teamMap">
		select * from tx_team where gid = #{gid}
	</select>
	<insert id="addTeam" parameterType="team">
		insert into tx_team(tcname,tename,pic,gid) values(#{tcname},#{tename},#{pic},#{grade.id})
	</insert>
	
	<select id="queryTeamListByPick" parameterType="int" resultMap="teamMap">
		select * from tx_team where gid = #{gid}  order by tename asc
	</select>
	
	<update id="updateTeam" parameterType="team">
		update tx_team 
		<trim prefix="set" suffixOverrides=",">
			pickid = #{pickid},
		</trim>
		where tcname=#{tcname} and gid=#{grade.id}
	</update>
	
	<update id="truncateTeam" parameterType="int">
		update tx_team set pickid = null where gid = #{gid}
	</update>
</mapper>